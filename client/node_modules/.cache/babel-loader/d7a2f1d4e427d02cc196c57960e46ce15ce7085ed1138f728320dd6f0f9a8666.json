{"ast":null,"code":"import React,{useState}from'react';import{Line}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,TimeScale}from'chart.js';import'chartjs-adapter-date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,TimeScale);function ResultsSection(_ref){let{results}=_ref;const[alertPrice,setAlertPrice]=useState('');const[alertEmail,setAlertEmail]=useState('');const formatPrice=price=>{return price?`₹${parseFloat(price).toFixed(2)}`:'N/A';};const chartData={labels:results.priceHistory.map(p=>new Date(p.date)),datasets:[{label:'Price History',data:results.priceHistory.map(p=>({x:new Date(p.date),y:p.price})),fill:false,borderColor:'rgb(75, 192, 192)',tension:0.1}]};const chartOptions={responsive:true,plugins:{legend:{position:'top'},title:{display:true,text:'Price History'}},scales:{x:{type:'time',time:{unit:'day'},title:{display:true,text:'Date'}},y:{beginAtZero:false,title:{display:true,text:'Price (₹)'}}}};const renderPriceItem=(source,price,url)=>/*#__PURE__*/_jsxs(\"li\",{className:\"price-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"price-source\",children:source}),/*#__PURE__*/_jsxs(\"span\",{className:\"price-value\",children:[formatPrice(price),url&&/*#__PURE__*/_jsx(\"a\",{href:url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"product-link\",children:\"View Product\"})]})]});const handleSetAlert=e=>{e.preventDefault();// TODO: Implement server-side alert functionality\nalert(`Alert set for ₹${alertPrice}. We'll notify you at ${alertEmail}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"results\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"img\",{src:results.image,alt:results.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:results.title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Brand:\"}),\" \",results.brand||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",results.category||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rating:\"}),\" \",results.rating||'N/A']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-comparison\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Price Comparison\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"price-list\",children:[renderPriceItem(results.source,results.sourcePrice,results.sourceUrl),renderPriceItem('Amazon',results.amazonPrice,results.amazonUrl),renderPriceItem('Myntra',results.myntraPrice,results.myntraUrl),renderPriceItem('Tata CLiQ',results.tataCliqPrice,results.tataCliqUrl),renderPriceItem('Nykaa Fashion',results.nykaaFashionPrice,results.nykaaFashionUrl),renderPriceItem('AJIO',results.ajioPrice,results.ajioUrl)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-history\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Price History\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-extremes\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-extreme\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"price-extreme-label\",children:\"Highest price\"}),/*#__PURE__*/_jsx(\"div\",{className:\"price-extreme-value\",children:formatPrice(results.maxPrice)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-extreme\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"price-extreme-label\",children:\"Lowest price\"}),/*#__PURE__*/_jsx(\"div\",{className:\"price-extreme-value\",children:formatPrice(results.minPrice)})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'300px'},children:/*#__PURE__*/_jsx(Line,{data:chartData,options:chartOptions})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-alert\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Set Price Alert\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSetAlert,children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Alert Price\",value:alertPrice,onChange:e=>setAlertPrice(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Your Email\",value:alertEmail,onChange:e=>setAlertEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Set Alert\"})]})]})]});}export default ResultsSection;","map":{"version":3,"names":["React","useState","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","TimeScale","jsx","_jsx","jsxs","_jsxs","register","ResultsSection","_ref","results","alertPrice","setAlertPrice","alertEmail","setAlertEmail","formatPrice","price","parseFloat","toFixed","chartData","labels","priceHistory","map","p","Date","date","datasets","label","data","x","y","fill","borderColor","tension","chartOptions","responsive","plugins","legend","position","title","display","text","scales","type","time","unit","beginAtZero","renderPriceItem","source","url","className","children","href","target","rel","handleSetAlert","e","preventDefault","alert","src","image","alt","brand","category","rating","sourcePrice","sourceUrl","amazonPrice","amazonUrl","myntraPrice","myntraUrl","tataCliqPrice","tataCliqUrl","nykaaFashionPrice","nykaaFashionUrl","ajioPrice","ajioUrl","maxPrice","minPrice","style","width","height","options","onSubmit","placeholder","value","onChange","required"],"sources":["/Users/sohilgupta/Documents/Work/price-comparison/client/src/components/ResultsSection.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, TimeScale } from 'chart.js';\nimport 'chartjs-adapter-date-fns';\n\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, TimeScale);\n\nfunction ResultsSection({ results }) {\n  const [alertPrice, setAlertPrice] = useState('');\n  const [alertEmail, setAlertEmail] = useState('');\n\n  const formatPrice = (price) => {\n    return price ? `₹${parseFloat(price).toFixed(2)}` : 'N/A';\n  };\n\n  const chartData = {\n    labels: results.priceHistory.map(p => new Date(p.date)),\n    datasets: [\n      {\n        label: 'Price History',\n        data: results.priceHistory.map(p => ({ x: new Date(p.date), y: p.price })),\n        fill: false,\n        borderColor: 'rgb(75, 192, 192)',\n        tension: 0.1\n      }\n    ]\n  };\n\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top',\n      },\n      title: {\n        display: true,\n        text: 'Price History'\n      }\n    },\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day'\n        },\n        title: {\n          display: true,\n          text: 'Date'\n        }\n      },\n      y: {\n        beginAtZero: false,\n        title: {\n          display: true,\n          text: 'Price (₹)'\n        }\n      }\n    }\n  };\n\n  const renderPriceItem = (source, price, url) => (\n    <li className=\"price-item\">\n      <span className=\"price-source\">{source}</span>\n      <span className=\"price-value\">\n        {formatPrice(price)}\n        {url && (\n          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"product-link\">\n            View Product\n          </a>\n        )}\n      </span>\n    </li>\n  );\n\n  const handleSetAlert = (e) => {\n    e.preventDefault();\n    // TODO: Implement server-side alert functionality\n    alert(`Alert set for ₹${alertPrice}. We'll notify you at ${alertEmail}`);\n  };\n\n  return (\n    <div className=\"results\">\n      <div className=\"product-info\">\n        <img src={results.image} alt={results.title} />\n        <div className=\"product-details\">\n          <h2>{results.title}</h2>\n          <p><strong>Brand:</strong> {results.brand || 'N/A'}</p>\n          <p><strong>Category:</strong> {results.category || 'N/A'}</p>\n          <p><strong>Rating:</strong> {results.rating || 'N/A'}</p>\n        </div>\n      </div>\n      <div className=\"price-comparison\">\n        <h3>Price Comparison</h3>\n        <ul className=\"price-list\">\n          {renderPriceItem(results.source, results.sourcePrice, results.sourceUrl)}\n          {renderPriceItem('Amazon', results.amazonPrice, results.amazonUrl)}\n          {renderPriceItem('Myntra', results.myntraPrice, results.myntraUrl)}\n          {renderPriceItem('Tata CLiQ', results.tataCliqPrice, results.tataCliqUrl)}\n          {renderPriceItem('Nykaa Fashion', results.nykaaFashionPrice, results.nykaaFashionUrl)}\n          {renderPriceItem('AJIO', results.ajioPrice, results.ajioUrl)}\n        </ul>\n      </div>\n      <div className=\"price-history\">\n        <h3>Price History</h3>\n        <div className=\"price-extremes\">\n          <div className=\"price-extreme\">\n            <div className=\"price-extreme-label\">Highest price</div>\n            <div className=\"price-extreme-value\">{formatPrice(results.maxPrice)}</div>\n          </div>\n          <div className=\"price-extreme\">\n            <div className=\"price-extreme-label\">Lowest price</div>\n            <div className=\"price-extreme-value\">{formatPrice(results.minPrice)}</div>\n          </div>\n        </div>\n        <div style={{ width: '100%', height: '300px' }}>\n          <Line data={chartData} options={chartOptions} />\n        </div>\n      </div>\n      <div className=\"price-alert\">\n        <h3>Set Price Alert</h3>\n        <form onSubmit={handleSetAlert}>\n          <input\n            type=\"number\"\n            placeholder=\"Alert Price\"\n            value={alertPrice}\n            onChange={(e) => setAlertPrice(e.target.value)}\n            required\n          />\n          <input\n            type=\"email\"\n            placeholder=\"Your Email\"\n            value={alertEmail}\n            onChange={(e) => setAlertEmail(e.target.value)}\n            required\n          />\n          <button type=\"submit\">Set Alert</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default ResultsSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}